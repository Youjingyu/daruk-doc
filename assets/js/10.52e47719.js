(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{214:function(v,_,t){"use strict";t.r(_);var d=t(2),r=Object(d.a)({},function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h3",{attrs:{id:"daruk-压力测试报告"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#daruk-压力测试报告","aria-hidden":"true"}},[v._v("#")]),v._v(" Daruk 压力测试报告")]),v._v(" "),t("p",[v._v("其实 Daruk 只是在 Koa 的基础上进行了一定启动时封装，但运行时仍旧是 Koa，因此 Daruk 的运行时性能和 Koa 基本持平，从下面的压测数据也可以看到。")]),v._v(" "),t("p",[v._v("测试项目：某内部项目")]),v._v(" "),t("p",[v._v("测试一：并发 500，测试 5 分钟")]),v._v(" "),t("p",[v._v("结果：")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("数据")]),v._v(" "),t("th",[v._v("daruk 版本")]),v._v(" "),t("th",[v._v("纯 koa 版本")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("内存稳定值")]),v._v(" "),t("td",[v._v("130M 左右")]),v._v(" "),t("td",[v._v("120M左右")])]),v._v(" "),t("tr",[t("td",[v._v("cpu 稳定值")]),v._v(" "),t("td",[v._v("115% 左右")]),v._v(" "),t("td",[v._v("115% 左右")])]),v._v(" "),t("tr",[t("td",[v._v("请求成功数")]),v._v(" "),t("td",[v._v("1202K")]),v._v(" "),t("td",[v._v("1324K")])]),v._v(" "),t("tr",[t("td",[v._v("请求失败数")]),v._v(" "),t("td",[v._v("20")]),v._v(" "),t("td",[v._v("15")])])])]),v._v(" "),t("p",[v._v("测试二：并发 500，压测 1 分钟")]),v._v(" "),t("p",[v._v("注：下面的数据皆为压测过程中的均值")]),v._v(" "),t("p",[v._v("结果：")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("数据")]),v._v(" "),t("th",[v._v("daruk 版本")]),v._v(" "),t("th",[v._v("纯 koa 版本")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("eventLoop")]),v._v(" "),t("td",[v._v("最大值 63ms，均值较低")]),v._v(" "),t("td",[v._v("最大值 66ms，均值较低")])]),v._v(" "),t("tr",[t("td",[v._v("进程物理内存占用")]),v._v(" "),t("td",[v._v("180M")]),v._v(" "),t("td",[v._v("150M")])]),v._v(" "),t("tr",[t("td",[v._v("v8 申请的堆内存")]),v._v(" "),t("td",[v._v("90M")]),v._v(" "),t("td",[v._v("65M")])]),v._v(" "),t("tr",[t("td",[v._v("v8 实际使用堆内存")]),v._v(" "),t("td",[v._v("50M")]),v._v(" "),t("td",[v._v("25M")])]),v._v(" "),t("tr",[t("td",[v._v("活跃 handler 数")]),v._v(" "),t("td",[v._v("500")]),v._v(" "),t("td",[v._v("500")])])])]),v._v(" "),t("p",[v._v("测试三：上线到 docker")]),v._v(" "),t("p",[v._v("结果：")]),v._v(" "),t("p",[v._v("内存占用和cpu均无明显变化")]),v._v(" "),t("p",[v._v("内存：")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/17681925/54181325-26bca500-44d9-11e9-932b-b50f16307252.jpg",alt:""}})]),v._v(" "),t("p",[v._v("cpu：")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/17681925/54181318-22908780-44d9-11e9-8fd7-fdbd58ef26f2.png",alt:""}})])])},[],!1,null,null,null);_.default=r.exports}}]);